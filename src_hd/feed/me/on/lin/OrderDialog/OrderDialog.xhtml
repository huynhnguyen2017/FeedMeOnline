<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<h:body>
	<ui:composition template="/layouts/basic.xhtml">
		<h:outputStylesheet library="default" name="css/order-style.css" />


		<ui:define name="title">OrderDialog</ui:define>
		<ui:define name="content">
			<h:form id="form">
				<p:layout style="min-width:400px;min-height:1200px;">
					<p:layoutUnit position="north" resizable="true" size="100"
						minSize="40" maxSize="200">

						<!-- login info -->
						<ic:feed.me.on.lin.UserProfileComponent ></ic:feed.me.on.lin.UserProfileComponent>


					</p:layoutUnit>
					<p:layoutUnit position="west" resizable="true" minSize="200">
						<h:panelGroup id="westOrderList">
							<div
								style="display: flex; flex-wrap: wrap; justify-content: center; align-self: center; align-content: center; border: 1px solid black; height: 50px;">
								<p:commandButton
									oncomplete="PF('createOrderingTicket').show();" value="New"
									update="form" />
							</div>

							<ui:repeat value="#{data.restaurants}" var="newRestaurant">
								<h:commandButton update="orderingDetailId, itemFormDataId"
									style="position: relative; width: 99%; margin-top: 2px;"
									value="#{newRestaurant.name}"
									actionListener="#{logic.displayOrderingTicketDetail(newRestaurant)}" />
							</ui:repeat>
						</h:panelGroup>
					</p:layoutUnit>

					<p:layoutUnit id="centerOrderingDetail" position="center"
						style="height: 100%">
						<div class="card">
							<p:panel style="border: 1px solid black; height: 100px;">
								<h3 style="float: left;">Ordering Detail</h3>
								<h:panelGroup style="float: right">
									<p:commandButton value="Purchase" />
									<p:commandButton actionListener="#{logic.deleteOrder}"
										value="Delete" update="form" />
									<p:commandButton oncomplete="PF('editOrderingDetail').show();"
										value="My Order" />
								</h:panelGroup>
							</p:panel>
							<p:panel>
								<h:panelGroup id="orderingDetailId">
									<p:outputLabel value="Restaurant: " />
									<h:outputText value="#{data.orderingRestaurant.name}" />
									<p:outputLabel value="Website: " style="margin-left: 50px;" />
									<h:outputText value="#{data.orderingRestaurant.website}" />
									<p:outputLabel value="Phone: " style="margin-left: 50px;" />
									<h:outputText value="#{data.orderingRestaurant.phone}" />
									<p:outputLabel value="Created Date: "
										style="margin-left: 50px;" />
									<h:outputText value="" />
									<p:outputLabel value="Total: " style="margin-left: 50px;" />
									<h:outputText value="" />
								</h:panelGroup>
							</p:panel>

							<p:panel>
								<p:dataTable styleClass="menuDisplayClass" id="itemFormDataId"
									style="border-style: none;" var="item"
									value="#{data.orderingItems}">
									<p:column style="width: 10%; text-align: center;">
										<h:outputText value="#{item.name}" />
									</p:column>
									<p:column style="border: none;">
										<p:outputLabel value="Price: " />
										<h:outputText value="#{item.price}" />
										<br />
										<p:outputLabel value="Whose: " />
										<h:outputText value="AnyOne" />
									</p:column>
								</p:dataTable>
							</p:panel>

						</div>

					</p:layoutUnit>
				</p:layout>
				<!-- Popup -->
				<p:dialog id="createOrderingTicket" style="text-align:center"
					widgetVar="createOrderingTicket" modal="true">
					<h3>Create Ordering Ticket</h3>
					<p:outputLabel value="Restaurant(*): " />
					<p:selectOneMenu id="option" value="#{data.restaurantId}">
						<f:selectItem itemValue="#{null}" itemLabel="Choose one..." />
						<f:selectItems value="#{data.restaurants}" var="newRestaurant"
							itemLabel="#{newRestaurant.name}" itemValue="#{newRestaurant.id}" />
						<f:selectItem itemValue="250000000" itemLabel="New Restaurant" />
						<p:ajax listener="#{logic.checkNewRestaurant}"
							oncomplete="updateRestaurantInput()" />
					</p:selectOneMenu>
					<p:remoteCommand name="updateRestaurantInput"
						update="newRestaurantId" />
					<br />
					<h:panelGroup id="newRestaurantId">
						<p:outputLabel value="Name: " />
						<p:inputText disabled="#{data.isRestaurantDisabled}"
							value="#{data.newRestaurant.name}" />
						<br />
						<p:outputLabel value="Website: " />
						<p:inputText disabled="#{data.isRestaurantDisabled}"
							value="#{data.newRestaurant.website}" />
						<br />
						<p:outputLabel value="Phone: " />
						<p:inputText disabled="#{data.isRestaurantDisabled}"
							value="#{data.newRestaurant.phone}" />
						<br />
						<p:selectBooleanCheckbox value="#{data.isItemDisabled}"
							itemLabel="Order out of list">
							<p:ajax update="foodInputId" listener="#{logic.inputNewFood}" />
						</p:selectBooleanCheckbox>

					</h:panelGroup>

					<!--  Input data here -->
					<p:panelGrid columns="3" layout="grid"
						styleClass="showcase-text-align-center" id="foodInputId">

						<h:panelGroup>
							<p:outputLabel value="Food name(*)" />
							<br />
							<p:inputText disabled="#{not data.isItemDisabled}"
								value="#{data.newItem.name}" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="Price" />
							<br />
							<p:inputText disabled="#{not data.isItemDisabled}"
								value="#{data.newItem.price}" />
						</h:panelGroup>
						<p:commandButton disabled="#{not data.isItemDisabled}"
							actionListener="#{logic.save}"
							update=":form:ticketShowTable, :form:newRestaurantId, :form:foodInputId, :form:westOrderList"
							value="Add" />
					</p:panelGrid>

					<p:dataTable border="1" id="ticketShowTable" var="foodItem"
						value="#{data.items}">
						<p:column headerText="Food" id="foodNameId">
							<h:outputText value="#{foodItem.name}"></h:outputText>
						</p:column>

						<p:column headerText="Price" id="foodPriceId">
							<h:outputText value="#{foodItem.price}"></h:outputText>
						</p:column>

						<p:column headerText="Action" style="width:5em;">
							<p:commandLink actionListener="#{logic.delete(foodItem)}"
								style="display:inline; text-align:center;"
								update=":form:ticketShowTable">
								<span class="ui-icon ui-icon-trash" />
							</p:commandLink>
						</p:column>
					</p:dataTable>
				</p:dialog>

				<p:dialog header="I'm hungry..." widgetVar="editOrderingDetail"
					modal="true" height="300">
					<p:remoteCommand name="updateOrderingDetail" update="myOrderId" />
					<div>
						<h:panelGroup id="myOrderId">
							<div class="container-fluid">
								<div class="row">
									<div class="col-sm-12"
										style="display: flex; justify-content: center;">
										<h3>#{data.orderingRestaurant.name}</h3>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12"
										style="display: flex; justify-content: center;">
										<a>#{data.orderingRestaurant.website}</a>
									</div>
								</div>
								<div class="row">
									<p>
										I want to order
										<p:selectOneMenu id="chooseOrderingMenuOption"
											value="#{data.myMenuFoodId}">
											<f:selectItem itemValue="-100000" itemLabel="Choose one..." />
											<f:selectItems value="#{data.orderingItems}"
												var="orderingItem" itemLabel="#{orderingItem.name}"
												itemValue="#{orderingItem.id}" />
											<f:selectItem itemValue="-50000" itemLabel="SomethingElse" />
											<p:ajax listener="#{logic.chooseMyFood}"
												oncomplete="updateOrderingDetail()" />
										</p:selectOneMenu>

										It price <strong>#{data.myMenuFood.price} VND</strong> is and
										my notice is
										<h:inputText value="#{data.myOrderNotice}" />
										. Thanks!
									</p>
								</div>
							</div>

							<br />
							<br />
							<div class="row">
								<div class="col-sm-12"
									style="display: flex; justify-content: center;">
									<p:commandButton type="button"  styleClass="btn btn-primary"
										value="Feed me plz!!!" />
								</div>
							</div>

						</h:panelGroup>
					</div>
				</p:dialog>
			</h:form>

		</ui:define>
	</ui:composition>
</h:body>
</html>